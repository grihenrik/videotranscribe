{% extends "admin_base.html" %}

{% block title %}OAuth Settings{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>OAuth Provider Settings</h1>
        <a href="{{ url_for('admin.dashboard') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <div class="alert alert-info">
        <h5>OAuth Configuration Instructions</h5>
        <p>Configure your OAuth providers to enable user sign-in. Each provider requires:</p>
        <ul>
            <li><strong>Client ID and Secret:</strong> Obtained from the provider's developer portal</li>
            <li><strong>Redirect URI:</strong> Use <code>{{ callback_domain }}/auth/[provider]/authorized</code></li>
        </ul>
        <p>For each provider, ensure you've added the correct callback URL in their developer portal:</p>
        <ul>
            <li><strong>Google:</strong> <code>{{ callback_domain }}/auth/google/authorized</code></li>
            <li><strong>Twitter:</strong> <code>{{ callback_domain }}/auth/twitter/authorized</code></li>
            <li><strong>Discord:</strong> <code>{{ callback_domain }}/auth/discord/authorized</code></li>
        </ul>
    </div>

    <div class="row">
        <!-- Google OAuth Settings -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex align-items-center">
                    <img src="/static/images/google-logo.svg" alt="Google" class="me-2" style="height: 24px;">
                    <h5 class="mb-0">Google OAuth</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('admin.update_oauth_settings') }}" method="POST">
                        <input type="hidden" name="provider" value="google">
                        
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="google-enabled" name="enabled" {% if google_enabled %}checked{% endif %}>
                            <label class="form-check-label" for="google-enabled">Enable Google Sign-In</label>
                        </div>
                        
                        <div class="mb-3">
                            <label for="google-client-id" class="form-label">Client ID</label>
                            <input type="text" class="form-control" id="google-client-id" name="client_id" value="{{ google_client_id }}">
                        </div>
                        
                        <div class="mb-3">
                            <label for="google-client-secret" class="form-label">Client Secret</label>
                            <input type="password" class="form-control" id="google-client-secret" name="client_secret" value="{{ google_client_secret }}" placeholder="Enter new secret or leave unchanged">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Save Google Settings</button>
                    </form>
                </div>
                <div class="card-footer">
                    <small class="text-muted">
                        <a href="https://console.cloud.google.com/apis/credentials" target="_blank">
                            <i class="bi bi-box-arrow-up-right"></i> Google Developer Console
                        </a>
                    </small>
                </div>
            </div>
        </div>
        
        <!-- Twitter OAuth Settings -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex align-items-center">
                    <img src="/static/images/twitter-logo.svg" alt="Twitter" class="me-2" style="height: 24px;">
                    <h5 class="mb-0">Twitter OAuth</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('admin.update_oauth_settings') }}" method="POST">
                        <input type="hidden" name="provider" value="twitter">
                        
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="twitter-enabled" name="enabled" {% if twitter_enabled %}checked{% endif %}>
                            <label class="form-check-label" for="twitter-enabled">Enable Twitter Sign-In</label>
                        </div>
                        
                        <div class="mb-3">
                            <label for="twitter-client-id" class="form-label">Client ID</label>
                            <input type="text" class="form-control" id="twitter-client-id" name="client_id" value="{{ twitter_client_id }}">
                        </div>
                        
                        <div class="mb-3">
                            <label for="twitter-client-secret" class="form-label">Client Secret</label>
                            <input type="password" class="form-control" id="twitter-client-secret" name="client_secret" value="{{ twitter_client_secret }}" placeholder="Enter new secret or leave unchanged">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Save Twitter Settings</button>
                    </form>
                </div>
                <div class="card-footer">
                    <small class="text-muted">
                        <a href="https://developer.twitter.com/en/portal/dashboard" target="_blank">
                            <i class="bi bi-box-arrow-up-right"></i> Twitter Developer Portal
                        </a>
                    </small>
                </div>
            </div>
        </div>
        
        <!-- Discord OAuth Settings -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex align-items-center">
                    <img src="/static/images/discord-logo.svg" alt="Discord" class="me-2" style="height: 24px;">
                    <h5 class="mb-0">Discord OAuth</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('admin.update_oauth_settings') }}" method="POST">
                        <input type="hidden" name="provider" value="discord">
                        
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="discord-enabled" name="enabled" {% if discord_enabled %}checked{% endif %}>
                            <label class="form-check-label" for="discord-enabled">Enable Discord Sign-In</label>
                        </div>
                        
                        <div class="mb-3">
                            <label for="discord-client-id" class="form-label">Client ID</label>
                            <input type="text" class="form-control" id="discord-client-id" name="client_id" value="{{ discord_client_id }}">
                        </div>
                        
                        <div class="mb-3">
                            <label for="discord-client-secret" class="form-label">Client Secret</label>
                            <input type="password" class="form-control" id="discord-client-secret" name="client_secret" value="{{ discord_client_secret }}" placeholder="Enter new secret or leave unchanged">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Save Discord Settings</button>
                    </form>
                </div>
                <div class="card-footer">
                    <small class="text-muted">
                        <a href="https://discord.com/developers/applications" target="_blank">
                            <i class="bi bi-box-arrow-up-right"></i> Discord Developer Portal
                        </a>
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}